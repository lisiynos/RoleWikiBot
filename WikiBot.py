#!/usr/bin/env python
# -*- coding: utf-8 -*-
#
# Basic example for a bot that uses inline keyboards.
# This program is dedicated to the public domain under the CC0 license.

import logging
from telegram import InlineKeyboardButton, InlineKeyboardMarkup
from telegram.ext import Updater, CommandHandler, CallbackQueryHandler
from config import TOKEN

logging.basicConfig(format='%(asctime)s - %(name)s - %(levelname)s - %(message)s',
                    level=logging.INFO)

pages = {
    'roles': """
*–í–ò–î–´ –ü–ï–†–°–û–ù–ê–ñ–ï–ô, –ò–• –¶–ï–õ–ò –ò –í–û–ó–ú–û–ñ–ù–û–°–¢–ò:*
*1. –ñ—É—Ä–Ω–∞–ª–∏—Å—Ç* ‚ù§Ô∏èÔ∏è
_–ó–∞–¥–∞—á–∞:_ –ø—É–±–ª–∏–∫–æ–≤–∞—Ç—å –Ω–æ–≤–æ—Å—Ç–∏, —Å–æ–±—Ä–∞—Ç—å –∫–∞–ø–∏—Ç–∞–ª. 
–ï—Å—Ç—å –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –ø—Ä–æ–¥–∞–≤–∞—Ç—å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–∞–º –∏ –Ω—É–∂–¥–∞—é—â–∏–º—Å—è.
*2. –ü–æ–ª–∏—Å–º–µ–Ω* üëÆ‚Äç
_–ó–∞–¥–∞—á–∞:_ –ø–æ–π–º–∞—Ç—å –∫–∞–∫ –º–æ–∂–Ω–æ –±–æ–ª—å—à–µ —Ä–∞–∑–æ—Ä–∏—Ç–µ–ª–µ–π. 
–ï—Å—Ç—å –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å —Å–æ–∑—ã–≤–∞—Ç—å –ø—Ä–∏—Å—è–∂–Ω—ã—Ö –¥–ª—è —Å—É–¥–∞ –∏ –∑–∞–ø—Ä–æ—Å–∏—Ç—å –∏—Å—Ç–æ—Ä–∏—é –∏–≥—Ä–æ–∫–∞.
*3. –†–∞–∑–æ—Ä–∏—Ç–µ–ª–∏* üëΩ
_–ó–∞–¥–∞—á–∞:_ —Å–ª–∏—Ç—å –∫–∞–∫ –º–æ–∂–Ω–æ –±–æ–ª—å—à–µ –¥–µ–Ω–µ–≥(—Å–æ–±—Ä–∞—Ç—å –æ—Ç—Ä–∏—Ü–∞—Ç–µ–ª—å–Ω—ã–π –∫–∞–ø–∏—Ç–∞–ª). –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –≤—ã—Å—Ç—É–ø–∞—Ç—å –Ω–∞ —Å—É–¥–µ –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ –∏ –ø–æ–¥—Å—É–¥–∏–º—ã–º –∏ –∞–¥–≤–æ–∫–∞—Ç–æ–º.
*4. –ú–∏—Ä–Ω—ã–µ* üë¶üëß
_–ó–∞–¥–∞—á–∞:_ —Å–æ–±—Ä–∞—Ç—å –∫–∞–ø–∏—Ç–∞–ª. –ï—Å—Ç—å –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –ø–æ–¥–∞—Ç—å –ø—Ä–æ—à–µ–Ω–∏–µ(–ø–ª–∞—Ç–Ω–æ) –Ω–∞ —Ä–∞—Å—Å–º–æ—Ç—Ä–µ–Ω–∏–µ –¥–µ–ª–∞ –ø–æ –ø–æ–¥–æ–∑—Ä–µ–Ω–∏—é –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω–æ–≥–æ —á–µ–ª–æ–≤–µ–∫–∞ –≤ —Ä–∞–∑–æ—Ä–µ–Ω–∏–∏. 
*5. –†–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫* üöÄ
_–ó–∞–¥–∞—á–∞:_ —Å–¥–µ–ª–∞—Ç—å –≥–æ–¥–Ω—ã–π –ø—Ä–æ–µ–∫—Ç. –°–æ–±—Ä–∞—Ç—å –∫–∞–ø–∏—Ç–∞–ª, –Ω–∞–π—Ç–∏ —Å–ø–æ–Ω—Å–æ—Ä–æ–≤ –∏ –ø–æ–∫—É–ø–∞—Ç–µ–ª–µ–π.
*6. –°–ø–æ–Ω—Å–æ—Ä—ã* üíµ üëë
_–ó–∞–¥–∞—á–∞:_ –º–∞–∫—Å–∏–º–∏–∑–∏—Ä–æ–≤–∞—Ç—å —á–∏—Å–ª–æ —É–¥–∞—á–Ω—ã—Ö –∏–Ω–≤–µ—Å—Ç–∏—Ü–∏–π; —Å–æ–±—Ä–∞—Ç—å –∫–∞–ø–∏—Ç–∞–ª. 
(–ò–Ω–≤–µ—Å—Ç–∏—Ü–∏—è —Å—á–∏—Ç–∞–µ—Ç—Å—è —É–¥–∞—á–Ω–æ–π, –µ—Å–ª–∏ –≤—ã—Ä—É—á–∫–∞ –ø—Ä–µ–≤–∑–æ—à–ª–∞ –≤–ª–æ–∂–µ–Ω–∏—è –≤ –ø—Ä–æ–µ–∫—Ç. –î–æ–ª—è —Å–ø–æ–Ω—Å–æ—Ä–∞ –æ–±–≥–æ–≤–∞—Ä–∏–≤–∞–µ—Ç—Å—è —Å —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–∞–º–∏.)
    """,

    'money': """ 
*–°–ø–æ—Å–æ–±—ã –ø–æ–ª—É—á–µ–Ω–∏—è –¥–µ–Ω–µ–≥*
1.  –°–æ–±—Ä–∞—Ç—å —Ä–∞–∑–±—Ä–æ—Å–∞–Ω–Ω—É—é –≤–∞–ª—é—Ç—É –ø–æ —Ü–µ–Ω—Ç—Ä—É
2.  –í–ª–æ–∂–∏—Ç—å –¥–µ–Ω—å–≥–∏ –≤ —É–¥–∞—á–Ω—ã–π –ø—Ä–æ–µ–∫—Ç –∏ –ø–æ–ª—É—á–∏—Ç—å –ø—Ä–∏–±—ã–ª—å
3.  –ò—Å–∫–∞—Ç—å –ø–æ–¥—Ä–∞–±–æ—Ç–∫—É –Ω–∞ —Å—Ç–æ—Ä–æ–Ω–µ, –ø–æ–º–æ–≥–∞—è —Ä–∞–∑–ª–∏—á–Ω—ã–º –ø–µ—Ä—Å–æ–Ω–∞–∂–∞–º
4.  –ù–∞–π—Ç–∏ —è—â–∏–∫ –ü–∞–Ω–¥–æ—Ä—ã
    """,

    'victory': """ 
*–í–∏–¥—ã –ø–æ–±–µ–¥—ã*
1. –°–æ–±—Ä–∞—Ç—å –Ω–∞–∏–±–æ–ª—å—à–∏–π –∫–∞–ø–∏—Ç–∞–ª
2. –°–¥–µ–ª–∞—Ç—å –ª—É—á—à–µ–≥–æ –±–æ—Ç–∞
3. –°–¥–µ–ª–∞—Ç—å –Ω–∞–∏–±–æ–ª—å—à–µ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —É–¥–∞—á–Ω—ã—Ö –∏–Ω–≤–µ—Å—Ç–∏—Ü–∏–π
4. –í—ã–ø–æ–ª–Ω–∏—Ç—å –Ω–∞–∏–±–æ–ª—å—à–µ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –∑–∞–¥–∞—á
    """,

    'news': """
*–ù–æ–≤–æ—Å—Ç–∏:*
1. *–î–µ–Ω—å –Ω–µ–∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏!*
–î–µ–Ω—å –Ω–µ–∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –ø—Ä–æ–∏–∑–æ—à–µ–ª –≤ –ë–µ—Ä–ª—è–Ω–¥–∏–∏ 6 –æ–∫—Ç—è–±—Ä—è 2017 –≥–æ–¥–∞. 
–ü—Ä–∏ –≥–æ–ª–æ—Å–æ–≤–∞–Ω–∏–∏ –º–Ω–µ–Ω–∏—è —Ä–∞–∑–¥–µ–ª–∏–ª–∏—Å—å, –Ω–æ –±–æ–ª—å—à–µ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –±—ã–ª–æ –∑–∞ –æ–±—ä—è–≤–ª–µ–Ω–∏–∏ 
–ë–µ—Ä–ª—è–Ω–¥–∏–∏ –Ω–µ–∑–∞–≤–∏—Å–∏–º–æ–π —Å—Ç—Ä–∞–Ω–æ–π. –ë–ª–≥–æ–¥–∞—Ä—è —ç—Ç–æ–º—É, 6 –æ–∫—Ç—è–±—Ä—è –∏ —Å—Ç–∞–ª–æ –ø–∞–º—è—Ç–Ω–æ–π –¥–∞—Ç–æ–π –≤ –Ω–∞—à–µ–π —Å—Ç—Ä–∞–Ω–µ.
2. –°–º–∏—Ä–Ω–æ–≤ –ò–≥–æ—Ä—å –±—ã–ª –ø–æ–π–º–∞–Ω –Ω–∞ –¥–µ–Ω–µ–∂–Ω–æ–º –º–æ—à–µ–Ω–Ω–∏—á–µ—Å—Ç–≤–µ
–°–ª—É—Ö–∏ —É—Ç–≤–µ—Ä–∂–¥–∞—é—Ç, —á—Ç–æ –°–º–∏—Ä–Ω–æ–≤ –ò–≥–æ—Ä—å –ê–Ω–¥—Ä–µ–µ–≤–∏—á –ø–µ—Ä–µ–≤–æ–¥–∏–ª –æ—Ç—Ä–∏—Ü–∞—Ç–µ–ª—å–Ω—ã–µ —Å—É–º–º—ã –Ω–µ–∏–∑–≤–µ—Å—Ç–Ω—ã–º –ª–∏—á–Ω–æ—Å—Ç—è–º! 
–ü–æ–¥–æ–∑—Ä–µ–≤–∞–µ–º—ã–π –ø—ã—Ç–∞–ª—Å—è –æ–ø—Ä–∞–≤–¥–∞—Ç—å—Å—è, –Ω–æ –ø–æ–ª–∏—Ü–∏—è –±—ã–ª–∞ –Ω–µ—É–∫–ª–æ–Ω–Ω–∞. 
–ö–∞–∂–µ—Ç—Å—è, —Å–∫–æ—Ä–æ –±—É–¥–µ—Ç –∑–∞–∑—ã–≤–∞—Ç—å—Å—è —Å–æ–≤–µ—Ç –ø—Ä–∏—Å—è–∂–Ω—ã—Ö. 
3. –¢–∞–∫–∂–µ –ø–æ–ª–∏—Ü–∏—è –ø–æ–¥–æ–∑—Ä–µ–≤–∞–µ—Ç –≤ –º–æ—à–µ–Ω–Ω–∏—á–µ—Å—Ç–≤–µ –ú–∏—Ä—Å–∫–æ–≤–∞ –ê–Ω–¥—Ä–µ—è. –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –Ω–µ –ø–æ–¥–≤–µ—Ä–∂–¥–µ–Ω–∞
4. –ù–µ–æ–∂–∏–¥–∞–Ω–Ω—ã–µ –Ω–æ–≤–æ—Å—Ç–∏. –ü—Ä–æ—Ç–∏–≤–Ω–∏–∫–∏ –ø—Ä–∏–∑–Ω–∞–Ω–∏—è –Ω–µ–∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –ë–µ—Ä–ª—è–Ω–¥–∏–∏ –æ—Å–∞–¥–∏–ª–∏ –∑–¥–∞–Ω–∏–µ –ø—Ä–∞–≤–∏—Ç–µ–ª—å—Å—Ç–≤–∞! 
–û–±—ä—è–≤–ª—è–µ—Ç—Å—è –≤—Å–µ–æ–±—â–∞—è –≤–æ–∏–Ω—Å–∫–∞—è –ø–æ–≤–∏–Ω–Ω–æ—Å—Ç—å!
""",
    'ads': """
*–í–ê–®–ê –†–ï–ö–õ–ê–ú–ê*
‚ù§Ô∏èÔ∏è
–í—Å–µ–≥–æ 10K - –∏ –≤–∞—à–∞ —Ä–µ–∫–ª–∞–º–∞ –±—É–¥–µ—Ç —Ç—É—Ç :)
"""
}


def menu():
    keyboard = [
        [
            InlineKeyboardButton(
                "–í–∏–¥—ã –ø–µ—Ä—Å–æ–Ω–∞–∂–µ–π –∏—Ö —Ü–µ–ª–∏ –∏ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏",
                callback_data='roles'
            ),
            InlineKeyboardButton(
                "–°–ø–æ—Å–æ–±—ã –ø–æ–ª—É—á–µ–Ω–∏—è –¥–µ–Ω–µ–≥ –≤ –∏–≥—Ä–µ",
                callback_data='money'
            )
        ],
        [
            InlineKeyboardButton(
                "–í–∏–¥—ã –ø–æ–±–µ–¥—ã",
                callback_data='victory'
            ),
            InlineKeyboardButton(
                "–ù–æ–≤–æ—Å—Ç–∏ –ë–µ—Ä–ª—è–Ω–¥–∏–∏",
                callback_data='news'
            ),
            InlineKeyboardButton(
                "–†–ï–ö–õ–ê–ú–ê",
                callback_data='ads'
            )
        ]
    ]
    return InlineKeyboardMarkup(keyboard)


def start(bot, update):
    update.message.reply_text('Wiki-bot –ø–æ —Ä–æ–ª–µ–≤–æ–π –∏–≥—Ä–µ –ë–µ—Ä–ª—è–Ω–¥–∏—è, —Ü–µ–Ω—Ç—Ä –ò–Ω—Ç–µ–ª–ª–µ–∫—Ç',
                              reply_markup=menu())


def button(bot, update):
    query = update.callback_query
    key = query.data
    text = "–°—Ç—Ä–∞–Ω–∏—Ü–∞: %s" % key
    if key in pages:
        text = pages[key]

    bot.edit_message_text(
        text=text, parse_mode="Markdown",
        reply_markup=menu(),
        chat_id=query.message.chat_id,
        message_id=query.message.message_id
    )


def help(bot, update):
    update.message.reply_text("–ö–æ–º–∞–Ω–¥–∞ /start –¥–ª—è –∑–∞–ø—É—Å–∫–∞ –±–æ—Ç–∞")


def error(bot, update, error):
    logging.warning('–ö–æ–º–∞–Ω–¥–∞ "%s" –≤—ã–∑–≤–∞–ª–∞ –æ—à–∏–±–∫—É "%s"' % (update, error))


# Create the Updater and pass it your bot's token.
updater = Updater(TOKEN)

updater.dispatcher.add_handler(CommandHandler('start', start))
updater.dispatcher.add_handler(CallbackQueryHandler(button))
updater.dispatcher.add_handler(CommandHandler('help', help))
updater.dispatcher.add_error_handler(error)

# Start the Bot
updater.start_polling()

# Run the bot until the user presses Ctrl-C or the process receives SIGINT,
# SIGTERM or SIGABRT
updater.idle()
